<!DOCTYPE html>
<html>
<head>
	<title>Test</title>
	<script type="text/javascript">

		

		function llamada(){
			var miVariable = "Ayuso admite que la Comunidad de Madrid ha perdido material comprado a China";

			var textPage = "Se está difundiendo por redes sociales un contenido publicado por Público que se titula Ayuso admite que la Comunidad de Madrid ha perdido material comprado a China, en relación a la compra de productos sanitarios por la crisis provocada por la pandemia de coronavirus. Sin embargo, la presidenta de la Comunidad de Madrid ha afirmado que el titular es falso y que, si bien es cierto que se ha perdido material, esto no le ha ocurrido a Madrid. Además, la periodista que firma el contenido, Marta Monforte, ha asegurado que la frase de Ayuso ha dado pie a un malentendido, pero Público no ha cambiado el titular a fecha de 14 de abril a las 18:42 horas. Os lo contamos. ESPECIAL CORONAVIRUS:  Consúltalo aquí. Díaz Ayuso asegura que no se refería a la Comunidad de Madrid con el material que se ha perdido El contenido publicado por Público y titulado Ayuso admite que la Comunidad de Madrid ha perdido material comprado a China recoge las declaraciones que Isabel Díaz Ayuso realizó en una entrevista en esRadio el lunes 13 de abril. Tras ser preguntada sobre si sería lógico que en el futuro las comunidades autónomas pudieran hacer solicitar esas compras de forma conjunta, Ayuso [min. 11:25] contesto lo siguiente: “Yo como comunidad autónoma me he estado pegando con otros países por traer el material. Y eso desde luego es inusual y yo no tengo la fuerza de un Estado, porque yo no tengo embajadas, no tengo consulados. Entonces, nosotros lo que hemos tenido que hacer después de hablar con miles de personas es buscar unos distribuidores que pudieran a su vez casar el material que nos iban proporcionando con las leyes chinas que por cierto han cambiado dos veces de criterio en todo este tiempo, lo que ha provocado también que muchísimo material que estaba ya a punto de embarcar volviera a dejarse en pista, que se perdiera, y además llega en ese momento otro país y nos vuelve a quitar mercancía. Desde Maldita.es no valoramos si Ayuso se refería a Madrid o no en esta frase, pero no lo dijo explícitamente, la Comunidad lo niega y la periodista ha añadido a la pieza publicada que Ayuso no se refería a la Comunidad de Madrid sino a otros gobiernos Después de que Público titulara que Ayuso admite que la Comunidad de Madrid ha perdido material comprado a China , Díaz Ayuso escribió en Twitter que el titular es falso y que la Comunidad de Madrid no ha perdido nada ni a nosotros nos han estafado Isabel Díaz Ayuso @IdiazAyuso Este titular es falso. Esta situación ha sucedido, pero no a Madrid.  No hemos perdido nada ni a nosotros nos han estafado.https://m.publico.es/politica/2472987/ayuso-admite-que-la-comunidad-de-madrid-ha-perdido-material-comprado-a-china/amp?utm_source=twitter&utm_medium=social&utm_campaign=web&__twitter_impression=true La presidenta de la Comunidad de Madrid, Isabel Díaz Ayuso. Fuente: CAM Ayuso admite que la Comunidad de Madrid ha perdido material comprado a China La presidenta de la región asegura que las compras de material han sido complicadas: Las leyes chinas han cambiado dos veces de criterio, lo que ha provocado que muchísimo material que estaba a...m.publico.es17,3 mil16:15 - 13 abr. 2020 Información y privacidad de Twitter Ads 10,9 mil personas están hablando de esto La periodista que firma el contenido admite que no contrastó las declaraciones de Ayuso Por su parte, la periodista de Público que firma el contenido ha respondido a Ayuso en Twitter. Tras el tuit de la presidenta de Madrid, la periodista añadió a la pieza publicada que Ayuso no se refería a la Comunidad de Madrid sino a otros gobiernos. Sin embargo, a pesar de haber añadido esta aclaración, no ha cambiado el titular, que sigue siendo Ayuso admite que la Comunidad de Madrid ha perdido material comprado a China a fecha de 14 de abril a las 13 horas. Según Público, la Comunidad de Madrid ha admitido que la información ha dado pie a ser malinterpretada pero que a ellos no les han bajado nada del avión.";

			readText(textPage,miVariable);
		}

		function readText(text,keywords) {

			var completeKeywInText = searchCompleteText(text,keywords);

			console.log("Resultado de texto completo: "+completeKeywInText);
			
			//cambiamos a minúsculas todo el texto
			keywords = keywords.toLowerCase();
			text = text.toLowerCase();


			//extraemos los carácteres innecesarios
			var keys = keywords.split(/[-+, .]/);

			//eliminamos elementos duplicados en el array
			keys = keys.filter(onlyUnique);

			for(var i = 0; )

			var textSplited = text.split(/[-+, .]/);

			//cantidad de palabras que coinciden
			var count = 0;
			for (var i = 0; i < textSplited.length; i++) {
				for (var j = 0; j < keys.length; j++){
					if (keys[j] == textSplited[i] && keys[j] != "") {
						count++;
					}
				}
			}

			var numberText = textSplited.length;
			var percent = (count * 100) / numberText;



			console.log(count);
			console.log(percent);
			console.log(keys);
			console.log(textSplited);
		}

		function onlyUnique(value, index, self) { 
		    return self.indexOf(value) === index;
		}

		function searchCompleteText(text,keywords){
			var result;

			text = text.toLowerCase();
			keywords = keywords.toLowerCase();

			if (text.includes(keywords) == true) {
				result = 1;

			}
			else{
				result = 0;
			}
			return result;

		}


	</script>
</head>
<body>
	<h1>Hola</h1>
	<button onclick="llamada();">Probar</button>
</body>
</html>